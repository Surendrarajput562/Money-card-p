<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Loan Application System</title>

  <!-- Google Site Verification -->
  <meta name="google-site-verification" content="google93501a1915fca013.html">

  <!-- Firebase SDK -->
  <script defer src="/__/firebase/11.1.0/firebase-app-compat.js"></script>
  <script defer src="/__/firebase/11.1.0/firebase-auth-compat.js"></script>
  <script defer src="/__/firebase/11.1.0/firebase-database-compat.js"></script>
  <script defer src="/__/firebase/init.js"></script>

  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin-top: 50px;
    }
    input, button {
      padding: 10px;
      font-size: 16px;
      margin: 10px;
    }
    .hidden {
      display: none;
    }
    .form-container {
      margin: 20px;
    }
  </style>
</head>
<body>
  <h1>Loan Application System</h1>

  <!-- Login and Sign Up Buttons -->
  <div id="buttons">
    <button id="signInButton">Sign In</button>
    <button id="signUpButton">Sign Up</button>
    <button id="ownerLoginButton">Owner Login</button>
  </div>

  <!-- User Login Form -->
  <div id="loginForm" class="form-container hidden">
    <h3>Sign In</h3>
    <input type="email" id="loginEmail" placeholder="Enter your email"><br>
    <input type="password" id="loginPassword" placeholder="Enter your password"><br>
    <button id="loginSubmitButton">Login</button><br>
    <a href="#" id="forgotPasswordLink">Forgot Password?</a><br>
    <span id="errorMessage" style="color: red;"></span>
  </div>

  <!-- User Sign Up Form -->
  <div id="signUpForm" class="form-container hidden">
    <h3>Sign Up</h3>
    <input type="text" id="signupName" placeholder="Enter your name"><br>
    <input type="email" id="signupEmail" placeholder="Enter your email"><br>
    <input type="text" id="signupMobile" placeholder="Enter your mobile number"><br>
    <input type="password" id="signupPassword" placeholder="Create a password"><br>
    <button id="signUpSubmitButton">Create Account</button><br>
    <h3>Or Sign Up using Google</h3>
    <button id="googleSignUpButton">Sign Up with Google</button>
  </div>

  <!-- Forgot Password Form -->
  <div id="forgotPasswordForm" class="form-container hidden">
    <h3>Forgot Password</h3>
    <input type="email" id="forgotPasswordEmail" placeholder="Enter your email"><br>
    <button id="resetPasswordButton">Reset Password</button><br>
    <span id="resetMessage"></span>
  </div>

  <script>
    const validOwnerEmail = "rajputsurendra562@gmail.com";
    const validOwnerPassword = "6268520141";

    // Show Login Form
    document.getElementById('signInButton').addEventListener('click', function() {
      toggleForms('loginForm');
    });

    // Show Sign Up Form
    document.getElementById('signUpButton').addEventListener('click', function() {
      toggleForms('signUpForm');
    });

    // Show Forgot Password Form
    document.getElementById('forgotPasswordLink').addEventListener('click', function() {
      toggleForms('forgotPasswordForm');
    });

    // Show Owner Login Form
    document.getElementById('ownerLoginButton').addEventListener('click', function() {
      toggleForms('loginForm');
    });

    // Login Process
    document.getElementById('loginSubmitButton').addEventListener('click', function() {
      const email = document.getElementById('loginEmail').value;
      const password = document.getElementById('loginPassword').value;
      
      if (email === validOwnerEmail && password === validOwnerPassword) {
        window.location.href = '/admin.html';  // Redirect to Admin Dashboard for Owner
      } else {
        firebase.auth().signInWithEmailAndPassword(email, password)
          .then((userCredential) => {
            window.location.href = '/homepage.html';  // Redirect to homepage for User
          })
          .catch((error) => {
            document.getElementById('errorMessage').textContent = "Incorrect credentials. Please try again.";
          });
      }
    });

    // Sign Up Process
    document.getElementById('signUpSubmitButton').addEventListener('click', function() {
      const name = document.getElementById('signupName').value;
      const email = document.getElementById('signupEmail').value;
      const mobile = document.getElementById('signupMobile').value;
      const password = document.getElementById('signupPassword').value;
      
      firebase.auth().createUserWithEmailAndPassword(email, password)
        .then((userCredential) => {
          window.location.href = '/homepage.html';  // Redirect to homepage after successful sign-up
        })
        .catch((error) => {
          console.error(error.message);
        });
    });

    // Reset Password Process
    document.getElementById('resetPasswordButton').addEventListener('click', function() {
      const email = document.getElementById('forgotPasswordEmail').value;
      firebase.auth().sendPasswordResetEmail(email)
        .then(() => {
          document.getElementById('resetMessage').textContent = 'Password reset email sent! Please check your inbox.';
        })
        .catch((error) => {
          document.getElementById('resetMessage').textContent = 'Error: ' + error.message;
        });
    });

    // Function to toggle visibility of forms
    function toggleForms(formId) {
      const forms = ['loginForm', 'signUpForm', 'forgotPasswordForm'];
      forms.forEach((form) => {
        document.getElementById(form).classList.add('hidden');
      });
      document.getElementById(formId).classList.remove('hidden');
    }
  </script>
</body>
</html>
