<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instant Recharge</title>
</head>
<body style="text-align:center; padding-top:100px; font-family:sans-serif; background:#f4f4f4;">

    <div style="background:white; padding:30px; border-radius:15px; display:inline-block; box-shadow:0 5px 15px rgba(0,0,0,0.1);">
        <h2>Enter Amount (INR)</h2>
        <input type="number" id="amt" placeholder="Amount" style="padding:15px; width:220px; font-size:18px; border:1px solid #ccc; border-radius:8px;">
        <br><br>
        <button onclick="payNow()" id="btn" style="padding:15px 40px; background:#1a73e8; color:white; border:none; border-radius:8px; cursor:pointer; font-weight:bold; font-size:18px;">
            Pay with UPI
        </button>
    </div>

    <script>
    async function payNow() {
        const amt = document.getElementById('amt').value;
        const btn = document.getElementById('btn');
        if(!amt || amt < 1) return alert("Bhai, amount dalo!");

        btn.innerText = "Generating Order...";
        btn.disabled = true;

        try {
            const res = await fetch('https://upigetwey.surendrarathode040.workers.dev/', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ amount: amt })
            });

            const data = await res.json();

            // AllAPI ki documentation ke mutabiq 'status' check
            if(data.status === true && data.results.payment_url) {
                window.location.href = data.results.payment_url;
            } else {
                alert("Error: " + data.message);
                console.log(data);
            }
        } catch (e) {
            alert("Worker Error! Check URL.");
        } finally {
            btn.innerText = "Pay with UPI";
            btn.disabled = false;
        }
    }
    </script>
</body>
</html>


